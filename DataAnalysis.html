<!DOCTYPE html>
<html lang="en">
    <head>
        <title>cs_team_beta_hw2: Open Food Facts</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

        <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="./css/boxshadow.css">
        <link rel="stylesheet" type="text/css" href="./css/stylereveal.css">
        <link rel="stylesheet" type="text/css" href="./css/styleOpenFoodFacts.css">

        <script src="./jquery.min.js"></script>
        <script src="./js/bootstrap.min.js"></script>
        <script src="./js/scrollreveal.min.js"></script>
        <script type="text/javascript" src="./js/d3.min.js"></script>
        <script>
            (function() {
                var config = {
                    viewFactor: 0.08,
                    duration: 800,
                    reset: true,
                }
                window.sr = new ScrollReveal(config)
            })()
        </script>
    </head>
    <body>


        <!------------------------------------------------------------------------>  
        <!-- Header																-->
        <!------------------------------------------------------------------------>  
        <div class="header" style="background-image:url(./images/left.jpg);background-position: left top; background-repeat: no-repeat">
            <h1>Eeat less sugar,<br>you're sweet enough already</h1>
            <p style="font-size:9px;color:gray">cs_team_beta_hw2 - Automn 2018</p>
            <p>
            <a href="https://world.openfoodfacts.org/data" target="_blank">
                <img alt="Open Food Facts" src="./images/openfoodfacts-logo-en-178x150.png" srcset="./images/openfoodfacts-logo-en-178x150.png" width="150px"/>
            </a>		
            </p>
        </div>


        <!------------------------------------------------------------------------>  
        <!-- MENU 																-->
        <!------------------------------------------------------------------------>  
        <div class="topnav" style="vertical-align: middle;" > 
            <table align="center"><tr>
                    <td><a href="./index.html">Home</a></td>
                    <td><a href="./DataExploration.html">Data Exploration</a></td>
                    <td><a href="./DataCleaning.html">Data Cleaning</a></td>
                    <td><a href="./DataAnalysis.html" class="topselected"><div class="selected">Data Analysis</div></a></td>
                    <td><a href="./DataGame.html">Data Game</a></td>
                </tr></table>
        </div>


        <!------------------------------------------------------------------------>  
        <!-- Top Text  															-->
        <!------------------------------------------------------------------------>    
        <div class="container" >
        


            <!-------------------------------------------------------------------------------------------------------------------->	  
            <!-- Paragraph1 																									-->
            <!-------------------------------------------------------------------------------------------------------------------->
            <div class="row">
                <div id="paragraph1_title">
                    <h3>#Data Analysis</h3>
                </div>

                <div >	
                    Here we explore questions we thought could prove worthwhile. In order, we have:

                    <ul>
                        <li>What is the most sugary product, and what is its nutrition score?</li>
                        <li>Is there a relation between the amount of fat, sugar and salt in products? </li>
                        <li>Does the amount of sugar in a product depend on the brand type (low-cost, high-cost, biological etc)</li>
                        <li>Check the products which does have sugar (compared to the one which have less)</li>
                        <li>Check the products which may have more than 25gr as recommanded by OMS: http://www.who.int/nutrition/sugars_public_consultation/en/</li>
                    </ul>

                </div>
            </div>

            <br><br><br>
            <!-------------------------------------------------------------------------------------------------------------------->	  
            <!-- Paragraph1 																									-->
            <!-------------------------------------------------------------------------------------------------------------------->
            <div class="row">
                <div id="paragraph1_title" class="container reveal_top">
                    <h3>Analysis: The First Investigation</h3>
                </div>

                <div id="boxshadow" style="background-color:whitesmoke;">	
                    <div class="container reveal_left">
                        <p align="right">
                        <table>
                            <tr>
                                <td>
                                    <p>
                                    Incredible After a deep analysis, we discover that the product which is containing the highest quantity of sugar, has a nutriction score of D, which is quite a bad score.
                                    </p>
                                </td>
                                <td>&nbsp;&nbsp;</td>
                                <td>
                                    <div id="boxshadow">
                                        <img  src="./images/DA_NutriscoreD.jpg" class="picture"/>	
                                    </div>
                                </td>

                            </tr>
                        </table>				
                        </p>
                    </div>

                    <div class="container reveal_right">
                        <p align="right">
                        <table>
                            <tr>
                                <td>
                                    <div id="boxshadow">
                                        <img  src="./images/DA_NutrifFact.jpg" class="picture"/>	
                                    </div>
                                </td>
                                <td>&nbsp;&nbsp;</td>
                                <td>
                                    <p>
                                    As written on the nutrition's facts, there is a high quantity of sugar.
                                    </p>
                                </td>
                            </tr>
                        </table>				
                        </p>
                    </div>

                    <div class="container reveal_left">
                        <p align="right">
                        <br>
                        <table>
                            <tr>
                                <td>
                                    <p>
                                    By the way, this product is nothing else than a 1kg of Sugar. At this stage, we all love data analysis !
                                    </p>
                                </td>
                                <td>&nbsp;&nbsp;</td>	
                                <td>
                                    <div id="boxshadow">
                                        <img  src="./images/DA_Sugar.jpg" class="picture"/>	
                                    </div>
                                </td>

                            </tr>
                        </table>				
                        </p>
                    </div>

                    <div class="container reveal_right">
                        <p align="left">
                        to conclude....
                        </p>			
                        <br/><br/>
                    </div>	
                </div>
            </div>

            <!-------------------------------------------------------------------------------------------------------------------->	  
            <!-- Paragraph2 																									-->
            <!-------------------------------------------------------------------------------------------------------------------->

            <br/><br/>
            <br/><br/>
            <div class="row">
                <div id="paragraph2_title" class="container reveal_top">
                    <h3>Sugar, fat and salt</h3>
                    <h4>Sugar alone is already quite bad, but it's not the only foodstuff that has been cited in relation to health problems. Fat and salts too are easy to overconsume, and to that end we ask the question - do bad things come in threes?
                    <ul>
                        <li>Are sugare products also fatty?</li>
                        <li>Are fatty products also salty?</li>
                        <li>Are salty products also sugary?</li>
                    </ul>
                    Let's dive into it!</h4>
 
                </div>

                <div id="boxshadow" style="background-color:whitesmoke;">	
                    <div class="container reveal_left">
                        <p align="right">
                        <b>Scatterplot of sugar, salt and fat in products</b>
                        </p>
                        <div id="boxshadow">
                            <img  src="./images/figures/pairplot.png" class="picture"/>	
                        </div>
                        <p align="left">
                        <br></br>
                        What we see above is a set of scatterplots based on all the products that contained valid (in the range 0-100g)
                        values for sugar, fat and salt content - roughly 99.9 percent of the original data. What this means in practice
                        is that we have 560974 products plotted. Even with ensuring acceptable ranges however, at least two problems become immediatly apparent when observing the plots.

                        </p><p>
                        First, the data we are using is essentially how many percent of a product is made of sugar, fat and salt.
                        The total of these values should never add up to more than a hundred, so we would expect all of the points on
                        the scatterplots to remain firmly underneath a diagonal line drawn from the upper left to lower right corner.

                        </p><p>
                        Clearly some products have amazing properties - <b>Markets, Soft Cherry Candy Balls</b> for example consist of 100% sugar 
                        and 100% fat, <b>Chewing-gum espagnol</b> consist is 100% sugar, 100% salt.

                        </p><p>
                        Incredible. Absolutely incredible.

                        </p><p>
                        We would still like to assume that the majority of data is correctly labeled, so in order to get a more true 
                        picture of how these three values are distributed we decided to plot the density of the points rather than all the individual points.
                        </p>

                    </div>


                    <div class="container reveal_left">
                        <p align="right">
                        <b>Density plot of sugar, salt and fat in products</b>
                        </p>
                        <div id="boxshadow">
                            <img class="picture" src="./images/figures/unfixed_density.png" />					
                        </div>
                        <p align="left">
                        <br></br>
                        That paints, quite literally, a different picture. 
                        It appears that in general the values only range within tight boundaries.
                        It is difficult to interpret the pictures however so we make an effort to reduce the
                        effect of outliers by removing products with values beyond two standard deviations of the mean, resulting in dropping 12 % of the products.
                        </p>
                    </div>


                    <div class="container reveal_left">
                        <p align="right">
                        <b>Density plot of sugar, salt and fat in products without outliers</b>
                        </p>
                        <div id="boxshadow">
                            <img class="picture" src="./images/figures/fixed_density.png" />					
                        </div>
                        <p align="left">
                        <br></br>
                        Nice.
                        what we see now is how sugar, fat and salt correlates in the products. 
                        Visually it seems that most products contain zero of all three quantities, maybe that more sugar tend to imply less salt... but honestly, it's still difficult to tell.
                        To amend that we'll start of with trying to use the Pearson coefficent to see how well the relationships in the plots can be described by a simple line.
                        </p>
                    </div>


                    <div class="container reveal_left">
                        <p align="right">
                        <b>Pearson Coefficient matrix</b>
                        </p>
                        <div id="boxshadow">
                            <img class="picture" src="./images/figures/p_coeff1.png" />					
                        </div>
                        <p align="left">
                        <br></br>
                        In this first attempt at measuring the correlation we used the data for all products, and the results point to 
                        there being absolutely no relationship (indicated by values close to zero). 
                        </p><p>
                        However, the Pearson coefficent takes outliers too strongly into account, so much like we did when we plotted 
                        the density we remove the ten percent of the data that tended to extremes.
                        </p><p>
                    </div>


                    <div class="container reveal_left">
                        <p align="right">
                        <b>Pearson Coefficient matrix without outliers</b>
                        </p>
                        <div id="boxshadow">
                            <img class="picture" src="./images/figures/p_coeff2.png" />					
                        </div>
                        <p align="left">
                        <br></br>
                        In this second matrix some trends do appear, though they are very weak. Sugar and salt is weakly negatively correlated, 
                        with an increase in one coming at the decrease of another. Meanwhile sugar and fat, fat and salt exhibit a weak positive relationship.

                        </p><p>
                        Pearson is limited in that it only measures linear relationships, so for the sake of completedness we also decided to have a look at the Spearman coefficient.
                        </p>
                    </div>


                    <div class="container reveal_left">
                        <p align="right">
                        <b>Spearman Coefficient without outliers</b>
                        </p>
                        <div id="boxshadow">
                            <img class="picture" src="./images/figures/s_coeff.png" />					
                        </div>
                        <p align="left">
                        <br></br>
                        Using the Spearman coefficent revealed some more trends in the data.
                        The negative relationship between sugar and salt came out stronger while the the weak positive relationship 
                        between sugar and fat disappeared, and the positive relationship between salt and fat appeared stronger.
                        </p>
                    </div>

                    <h3>CONCLUSIONS</h3>
                    <p align="left">
                    Before making any statements, let us reiterate - the data is quite suspect. 
                    While we may have been able to remove the most obviously wrong data we are most likely far from catching everything. 
                    </p><p>
                    But let's assume that:
                    <ul>
                        <li>the range of products we have available are representative of the true distribution of products</li>
                        <li>the majority of the data is indeed correctly labeled</li>
                    </ul>
                    </p><p>
                    Then, we can see some weak relationships. 
                    <ul>
                        <li>Sugary products have a slight tendency to contain less salt</li>
                        <li>Sugary products have a slight tendency to contain more fat</li>
                        <li>Fatty products have a slight tendency to contain more salt</li>
                    </ul>
                    So to answer our original questions , do bad things come in threes?
                    </p><p>
                    Not to any significant degree no, when taken across all products.
                    </p><p>
                    The answer would probably have been quite different if we'd broken the analysis down by categories, such as cake or vegetables.

                    </p>
                    VWNOTE: If time allows, add the scatterplot colored by salt to view how all three interact? Do the breakdown by category.

                </div>
            </div>


            <!-------------------------------------------------------------------------------------------------------------------->
            <!-- Paragraph3 																									-->
            <!-------------------------------------------------------------------------------------------------------------------->

            <br></br>
            <br></br>
            <div class="row">
                <div id="paragraph3" class="container reveal_top">
                    <h3>Brand type and sugar content</h3>
                    <h4>Major producers tend to group their products under several brands.
                        One for customers on a budget, one for those with a bit more to spend, one for those who value organic food et cetera.
                    </h4><h4>
                        What we wonder is, does the sugar content differ between these types of brands?
                    </h4><h4>
                        Are the cheap brands also more sugary? Are ecological ones less sweet? Let's have a look!</h4>
                </div>

                <div id="boxshadow" style="background-color:whitesmoke;">
                    <div class="container reveal_left">
                        <p align="right">
                        <b>Amount of products for different types of brand labels</b>
                        </p>
                        <div id="boxshadow">
                            <img  src="./images/figures/prodcount.png" class="picture"/>
                        </div>
                        <p align="left">
                        <br></br>
                        While our original intent was to use the ten largest producers and divide their products into the categories we were interested in, we quickly discovered
                        that most of the data was insufficiently labeled. As an example, the biggest producer in the dataset <b> Auchan </b> has 5155 products.
                        They have sub-brands such as <b>Le Moins Cher</b> <b>Mmm!</b> and <b>Mieux Vivre Bio</b>.
                        In the dataset however, only two respectively zero respectively one product contains these labels.
                        It is likely that everything has simply been grouped under Auchan.
                        </p><p>
                        For that reason we ended up manually going through the list of big producers until we had found five producers that seemed to have a somewhat even spread
                        in all four categories.
                        </p><p>
                        The data in the table above is the aggregate of products from migros, coop, carrefour, casino and monoprix, grouped by the type of sub-brand
                        </p><p>

                    </div>


                    <div class="container reveal_left">
                        <p align="right">
                        <b>Probability density for sugar content across different kinds of labels</b>
                        </p>
                        <div id="boxshadow">
                            <img class="picture" src="./images/figures/cat_density.png" />
                        </div>
                        <p align="left">
                        <br></br>
                        What we are looking at here is an estimation of how likely a certain amount of sugar is for a certain category of food.
                        </p><p>
                        We can see that for all categories, values peak close to zero grams of sugar, indicating that no matter the label having a low sugar content is the norm.
                        </p><p>
                        Based on the graph it looks like high price products are more likely to contain more sugar, showed by the orange bump around the 40g mark.
                        The low price products also show a slight bump around 50 grams of sugar while the normal product range tend seems to contain less sugar in general, with ecological products in between.
                        </p><p>
                        So what does this mean?
                        First we reiterate the caveat that the data we're using is somewhat suspect, and that the amount of data is limited.
                        Another consideration is what kind of products end up in each brand. 
                        </p><p>
                        It seems plausible that the high-end products contain more luxury items. Expensive sweets, wine et cetera, which could explain the more sugary content.
                        The normal sortiment is naturally the one most likely to contain a wide range of products and is also the one we have the most data for, reducing the effect of outliers and category bias.
                        </p>
                    </div>

                    <h3>CONCLUSIONS</h3>
                    <p align="left">
                    An initial hypothesis was that the low-cost brands would be more sugary since sugar is cheap and high-calorie foods tend to be inexpensive.
                    </p><p>
                    The results while not based on as much data as we'd like seem to disagree however.
                    Rather, it looks like the high-end items tend to contain more sugar perhaps because these brands tend to be constituted by luxury products.
                    </p>

                </div>
            </div>
        </div>	

        <br/><br/>

        <!-------------------------------------------------------------------------------------------------------------------->	  
        <!-- End Navigation																									-->
        <!-------------------------------------------------------------------------------------------------------------------->
        <div align="center">    
            <table style="width:90%;max-width:1200px; min-width: 400px;" >
                <tr>
                    <td align="left">
                        <a href="./DataCleaning.html" style="font-size: 20px;color:#2f2f2f;vertical-align:right "><img src="./images/moveBack.png" width="40px"></img>Move back to Data Cleaning</a>
                    </td>
                    <td align="right">
                        <a href="./DataGame.html" style="font-size: 20px;color:#2f2f2f;vertical-align:right ">Move next to Data Game<img src="./images/moveNext.png" width="40px"></img></a>
                    </td>
                </tr>
            </table>
        </div>



        

        <div style="width: 100%;height:200px;background-image:url(./images/right.jpg);background-position: right bottom; background-repeat: no-repeat"></div>
        
        </div>

        <!-------------------------------------------------------------------------------------------------------------------->	  
        <!-- FOOTER		 																									-->
        <!-------------------------------------------------------------------------------------------------------------------->
        
        <footer>
            <p>steve.rey@epfl.ch</p>
            <p>yauheni.samasionak@epfl.ch</p>
            <p>victor.wiklund@epfl.ch</p>             
        </footer>



        <!-------------------------------------------------------------------------------------------------------------------->	  
        <!-- Script																											-->
        <!-------------------------------------------------------------------------------------------------------------------->
        <script>
            // JavaScript
            window.sr = ScrollReveal();
sr.reveal('.reveal_left', { origin: 'left', distance: '100px' });
sr.reveal('.reveal_right', { origin: 'right', distance: '100px' });
sr.reveal('.reveal_top', { origin: 'top', distance: '100px' });
        </script>


    </body>
</html>
